<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Line è©±è¡“å¿«æ‰‹ (å°Šçˆµå„ªåŒ–ç‰ˆ)</title>
  <style>
    /* --- åŸºç¤èƒŒæ™¯ --- */
    body { font-family: -apple-system, "Noto Sans TC", sans-serif; background: #f0f2f5; padding: 20px; margin: 0; -webkit-tap-highlight-color: transparent; }
    
    /* 1. HUD æé†’ (æ©˜è‰²æ¼¸å±¤) */
    #hud { 
        position: fixed; top: 15px; left: 50%; transform: translateX(-50%) translateY(-150%);
        width: 90%; max-width: 400px;
        background: linear-gradient(135deg, #FF8008 0%, #FFC837 100%);
        color: white; border-radius: 50px; padding: 10px 22px;
        display: flex; align-items: center; justify-content: space-between;
        z-index: 11000; box-shadow: 0 10px 25px rgba(255, 128, 8, 0.3);
        font-size: 14px; font-weight: bold;
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    #hud.show { transform: translateX(-50%) translateY(0); }
    .hud-btn { background: white; color: #FF8008; border: none; padding: 6px 16px; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }

    /* æ¨¡æ“¬å¡ç‰‡ */
    .store-card { background: white; border-radius: 20px; padding: 18px; margin-bottom: 16px; border-top: 6px solid #00C851; box-shadow: 0 4px 20px rgba(0,0,0,0.06); }
    .store-name { font-size: 19px; font-weight: bold; color: #1a1a1a; margin-bottom: 10px; }
    .btn-tool { display: flex; align-items: center; justify-content: center; padding: 10px 0; border-radius: 12px; font-size: 13px; font-weight: bold; cursor: pointer; text-decoration: none; border: 1px solid #eef0f2; background: #fff; color: #555; }

    /* --- ğŸŒŸ å°Šçˆµç‰ˆ Bottom Sheet --- */
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); z-index: 9998; display: none; opacity: 0; transition: opacity 0.3s; }
    
    .bottom-sheet { 
        position: fixed; bottom: 0; left: 0; right: 0; 
        background: rgba(255, 255, 255, 0.95); /* ç»ç’ƒæ“¬æ…‹ */
        backdrop-filter: blur(20px); 
        border-radius: 30px 30px 0 0; 
        z-index: 10000; 
        transform: translateY(100%); 
        transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1); 
        padding: 25px; padding-bottom: 45px; 
        display: flex; flex-direction: column; 
        max-height: 92vh; overflow-y: auto;
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 -10px 40px rgba(0,0,0,0.1);
    }
    .bottom-sheet.show { transform: translateY(0); }
    
    /* é ‚éƒ¨æ‹‰æ¡¿ */
    .bottom-sheet::before {
        content: ''; width: 45px; height: 5px; background: #dcdde1; border-radius: 10px;
        position: absolute; top: 12px; left: 50%; transform: translateX(-50%);
    }

    .sheet-header { font-size: 20px; font-weight: 800; text-align: center; margin-bottom: 20px; color: #2f3640; }

    /* ğŸŒŸ è¯ç¹«è³‡è¨Šå¡ (æ•´åˆ ID + åç‰‡) */
    .contact-info-card {
        background: #ffffff;
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.04);
        border: 1px solid #f1f2f6;
        text-align: center;
    }

    .line-info-row { 
        display: inline-flex; align-items: center; justify-content: center; gap: 8px; 
        margin-bottom: 18px; font-size: 20px; font-weight: 700; color: #007bff; 
        background: #f0f7ff; padding: 10px 20px; border-radius: 15px; cursor: pointer;
    }
    
    /* åç‰‡åœ–ç‰‡ (Fold 7 å°ˆå±¬å¤§åœ–) */
    .card-preview-img {
        width: 100%; max-width: 320px; height: auto;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        margin: 0 auto; display: block;
        cursor: grab; border: 3px solid #fff;
        transition: transform 0.2s;
    }
    .card-preview-img:active { cursor: grabbing; transform: scale(0.96); }

    .section-label { font-size: 13px; color: #a1a1a1; font-weight: bold; margin-bottom: 8px; display: block; text-transform: uppercase; letter-spacing: 1px; }

    /* è©±è¡“æ–‡å­—æ¡† */
    .line-textarea { 
        width: 100%; height: 180px; border: 1.5px solid #eee; border-radius: 18px; 
        padding: 15px; font-size: 15px; line-height: 1.6; resize: none; 
        margin-bottom: 20px; box-sizing: border-box; background: #fafafa;
        color: #333; outline: none; transition: 0.3s;
    }
    .line-textarea:focus { border-color: #007bff; background: #fff; box-shadow: 0 0 0 4px rgba(0,123,255,0.1); }

    /* æŒ‰éˆ•è¨­è¨ˆ */
    .line-btn-grid { display: grid; grid-template-columns: 1fr 1.6fr; gap: 12px; }
    .sheet-btn { padding: 16px; border-radius: 16px; font-size: 16px; font-weight: bold; cursor: pointer; border: none; transition: 0.2s; }
    .btn-copy-only { background: #f1f2f6; color: #7f8c8d; }
    .btn-copy-go { background: linear-gradient(135deg, #00b894 0%, #009432 100%); color: white; box-shadow: 0 8px 20px rgba(0, 184, 148, 0.3); }
    .sheet-btn:active { transform: scale(0.97); }

  </style>
</head>
<body>

  <div id="hud">
      <div class="hud-left"><span>â³ èŠå®Œè¨˜å¾—å›ä¾†æ›´æ–°é€²åº¦ï¼</span></div>
      <div><button class="hud-btn" onclick="openFakeUpdate()">ç«‹åˆ»æ›´æ–°</button></div>
  </div>

  <h3 style="color:#999; text-align:center; font-weight:normal; margin-top:40px;">--- æ¨¡æ“¬åˆ—è¡¨ä»‹é¢ ---</h3>
  
  <div class="store-card">
    <div class="store-name">æ„›æ´›é›…æ™‚å°šç¾å­¸</div>
    <div class="action-grid">
        <div class="btn-tool" onclick="openLineModal('æ„›æ´›é›…æ™‚å°šç¾å­¸', 'love_aloya', '0912345678', 'é ç´„ç³»çµ±èˆ‡è–ªè³‡è¨ˆç®—')">
            <span style="font-size:18px; margin-right:5px;">ğŸ’¬</span> é–‹å§‹è¯çµ¡
        </div>
    </div>
  </div>

  <div class="modal-overlay" id="lineModalOverlay" onclick="closeLineModal()"></div>
  <div class="bottom-sheet" id="lineModal">
      <div class="sheet-header">è¯ç¹«åå–®</div>
      
      <div class="contact-info-card">
          <span class="section-label">LINE ID / PHONE</span>
          <div class="line-info-row" onclick="copyLineId()">
              <span id="lineInfoIcon">ğŸ†”</span> <span id="lineInfoText">--</span>
          </div>

          <span class="section-label" style="margin-top:10px;">é•·æŒ‰åç‰‡å¯æ‹–æ›³è‡³ LINE</span>
          <img src="https://happy08200822.github.io/ezpretty-liff/card.jpg" class="card-preview-img" draggable="true">
      </div>

      <span class="section-label">é è¨­é–‹ç™¼è©±è¡“</span>
      <textarea id="lineScriptArea" class="line-textarea"></textarea>
      
      <div class="line-btn-grid">
          <button class="sheet-btn btn-copy-only" onclick="copyScriptOnly()">ğŸ“‹ åƒ…è¤‡è£½</button>
          <button class="sheet-btn btn-copy-go" onclick="copyAndGoLine()">ğŸš€ è¤‡è£½ä¸¦å‰å¾€ LINE</button>
      </div>
  </div>

  <script>
    let currentLineData = { id: "", url: "" };

    function openLineModal(name, lineId, phone, req) {
        const infoText = document.getElementById('lineInfoText');
        
        if (lineId && lineId !== "--") {
            infoText.innerText = lineId;
            currentLineData.id = lineId;
            currentLineData.url = `https://line.me/ti/p/~${lineId}`;
        } else {
            infoText.innerText = phone;
            currentLineData.id = phone;
            currentLineData.url = `https://line.me/ti/p/~${phone}`;
        }

        const reqText = (req && req.trim() !== "") ? req : "ç›¸é—œ";
        const script = `å“ˆå›‰ è€é—† æ‚¨å¥½ï¼æ‚¨é€™é‚Šæ˜¯ ${name} åº—å®¶å—ï½\næˆ‘æ˜¯ ezPretty é ç´„ç§‘æŠ€çš„æ¥­å‹™ç¶“ç† æšåº­ ğŸ˜Š\nå‰›æ‰æœ‰æ”¶åˆ°æ‚¨çš„è«®è©¢ï¼Œæ‚¨æƒ³äº†è§£æˆ‘å€‘é ç´„posç³»çµ±çš„ã€${reqText}ã€‘çš„åŠŸèƒ½å—ï¼Ÿ\n\næ‚¨çœ‹åˆ°è¨Šæ¯å¾Œï¼Œæ–¹ä¾¿è·Ÿæ‚¨é€šè©±1åˆ†é˜å—ï¼Ÿ\nå…ˆç°¡å–®è·Ÿæ‚¨äº†è§£ä¸€ä¸‹éœ€æ±‚ï¼Œå¾ŒçºŒæˆ‘å†å®‰æ’æ¥­å‹™è·Ÿæ‚¨ä»‹ç´¹ç³»çµ±ï¼Œç´„ç·šä¸Šæœƒè­° æˆ–æ˜¯ ç·šä¸‹è¦‹é¢éƒ½å¯ä»¥å”·ï¼`;
        
        document.getElementById('lineScriptArea').value = script;

        document.getElementById('lineModalOverlay').style.display = 'block';
        setTimeout(() => {
            document.getElementById('lineModalOverlay').style.opacity = '1';
            document.getElementById('lineModal').classList.add('show');
        }, 10);
    }

    function closeLineModal() {
        document.getElementById('lineModal').classList.remove('show');
        document.getElementById('lineModalOverlay').style.opacity = '0';
        setTimeout(() => document.getElementById('lineModalOverlay').style.display = 'none', 300);
    }

    function copyLineId() {
        navigator.clipboard.writeText(currentLineData.id);
        alert("âœ… å·²è¤‡è£½ ID/é›»è©±");
    }

    function copyScriptOnly() {
        const text = document.getElementById('lineScriptArea').value;
        navigator.clipboard.writeText(text);
        alert("âœ… è©±è¡“å·²è¤‡è£½");
    }

    function copyAndGoLine() {
        const text = document.getElementById('lineScriptArea').value;
        navigator.clipboard.writeText(text).then(() => {
            closeLineModal();
            // ğŸŒŸ é¡¯ç¤º HUD
            document.getElementById('hud').classList.add('show');
            // æ¨¡æ“¬é–‹å•Ÿ LINE
            console.log("è·³è½‰é€£çµ: " + currentLineData.url);
            alert("è©±è¡“å·²è¤‡è£½ï¼è«‹åœ¨ LINE è²¼ä¸Šã€‚\nè¯çµ¡å®Œç•¢è«‹é»æ“Šä¸Šæ–¹æ©˜è‰² HUD æ›´æ–°é€²åº¦ï¼");
        });
    }

    function openFakeUpdate() {
        alert("å·²é–‹å•Ÿæ›´æ–°è¦–çª—ï¼(æ¨¡æ“¬ä¸­)");
        closeHUD();
    }

    function closeHUD() {
        document.getElementById('hud').classList.remove('show');
    }
  </script>
</body>
</html>
