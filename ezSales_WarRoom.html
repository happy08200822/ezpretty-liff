<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ğŸ¯ ezPretty æ¥­å‹™ç«¶æŠ€å ´</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    [v-cloak] { display: none !important; }
    body { font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; background-color: #f4f6f9; -webkit-tap-highlight-color: transparent; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    /* è³ªæ„Ÿå‹•ç•« */
    .rep-active { color: white !important; text-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .card-transition-move { transition: transform 0.5s ease; }
  </style>
</head>
<body class="pb-20">
  <div id="app" v-cloak class="w-full px-3 md:px-6 pt-4 max-w-7xl mx-auto">

    <div class="flex justify-center mb-6">
      <div class="bg-gray-200/70 p-1.5 rounded-full flex w-full max-w-md shadow-inner relative">
        <button @click="setRep('All')" :class="['flex-1 py-3 rounded-full text-sm font-black transition-all duration-300 z-10', currentRep === 'All' ? 'bg-gray-800 text-white shadow-lg' : 'text-gray-500 hover:text-gray-700']">
          ğŸ† å…¨é«”
        </button>
        <button @click="setRep('Kelvin')" :class="['flex-1 py-3 rounded-full text-sm font-black transition-all duration-300 z-10', currentRep === 'Kelvin' ? 'bg-gradient-to-r from-blue-500 to-blue-700 text-white shadow-lg' : 'text-gray-500 hover:text-gray-700']">
          ğŸ‘¦ğŸ» Kelvin
        </button>
        <button @click="setRep('David')" :class="['flex-1 py-3 rounded-full text-sm font-black transition-all duration-300 z-10', currentRep === 'David' ? 'bg-gradient-to-r from-emerald-500 to-emerald-700 text-white shadow-lg' : 'text-gray-500 hover:text-gray-700']">
          ğŸ‘¨ğŸ»â€ğŸ’¼ David
        </button>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-3 mb-6">
      <div class="bg-white p-4 rounded-3xl border border-gray-100 shadow-sm flex items-center justify-between">
        <div>
          <p class="text-[10px] font-black text-gray-400 tracking-wider mb-1">ğŸ”¥ æ„é¡˜é«˜ (å³å°‡æ”¶å–®)</p>
          <div class="flex items-baseline gap-2">
            <span class="text-3xl font-black text-red-500">[[ getStat('æ„é¡˜é«˜') ]]</span>
            <span class="text-xs font-bold text-gray-400">å®¶</span>
          </div>
        </div>
        <div class="w-10 h-10 rounded-full bg-red-50 flex items-center justify-center text-lg">ğŸ’°</div>
      </div>
      <div class="bg-white p-4 rounded-3xl border border-gray-100 shadow-sm flex items-center justify-between">
        <div>
          <p class="text-[10px] font-black text-gray-400 tracking-wider mb-1">ğŸ“… å¾…å±•ç¤ºæ•¸é‡</p>
          <div class="flex items-baseline gap-2">
            <span class="text-3xl font-black text-blue-600">[[ getStat('å·²ç´„å±•') ]]</span>
            <span class="text-xs font-bold text-gray-400">å ´</span>
          </div>
        </div>
        <div class="w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center text-lg">ğŸš€</div>
      </div>
    </div>

    <div class="flex overflow-x-auto gap-2 no-scrollbar mb-6 pb-2">
      <button v-for="tab in tabs" :key="tab.id" @click="currentTab = tab.id"
              :class="['flex-1 min-w-[85px] flex flex-col items-center justify-center py-3 rounded-2xl border transition-all duration-200', currentTab === tab.id ? tab.activeClass + ' scale-105 border-transparent shadow-md ring-2 ring-offset-2 ' + tab.ringClass : 'bg-white text-gray-500 border-gray-100 shadow-sm']">
        <span class="text-2xl mb-1">[[ tab.icon ]]</span>
        <span class="text-[11px] font-black whitespace-nowrap mb-1">[[ tab.label ]]</span>
        <span :class="['text-[10px] px-2 py-0.5 rounded-full font-black', currentTab === tab.id ? 'bg-white/20 text-white' : 'bg-gray-100 text-gray-400']">[[ getTabCount(tab.id) ]]</span>
      </button>
    </div>

    <transition-group name="card-transition" tag="div" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <div v-for="item in filteredData" :key="item.id" class="bg-white rounded-[2rem] shadow-sm border border-gray-100 p-5 relative overflow-hidden flex flex-col">
        
        <div class="absolute left-0 top-0 bottom-0 w-1.5" :style="{ backgroundColor: getCategoryColor(item.status) }"></div>

        <div class="flex justify-between items-start mb-3 pl-2">
          <div>
            <h2 class="text-lg font-black text-gray-800 leading-tight mb-1">[[ item.area ]][[ item.storeName ]]</h2>
            <div class="flex flex-wrap gap-2 text-[11px] font-bold text-gray-400">
              <span class="flex items-center gap-1">ğŸ‘¤ [[ item.bossName ]]</span>
              <span class="text-gray-200">|</span>
              <span class="text-blue-500">ğŸ“ [[ item.phone ]]</span>
            </div>
          </div>
          <div class="flex flex-col items-end gap-1">
             <span :class="['text-[9px] font-black px-2 py-0.5 rounded-full', item.owner === 'Kelvin' ? 'bg-blue-100 text-blue-600' : 'bg-emerald-100 text-emerald-600']">[[ item.owner ]]</span>
             <span :class="['text-[9px] font-black px-2 py-0.5 rounded-md border', getStatusBadge(item.status)]">[[ item.status ]]</span>
          </div>
        </div>

        <div v-if="item.status === 'å·²ç´„å±•'" class="bg-blue-50/50 border border-blue-100 rounded-2xl p-3 mb-4 flex items-center gap-3">
          <div class="text-2xl">ğŸ“…</div>
          <div>
            <p class="text-[10px] font-black text-blue-400 uppercase tracking-tighter">å±•ç¤ºé å®š</p>
            <p class="text-sm font-black text-blue-700">[[ item.demoTime ]]</p>
            <p class="text-[10px] font-bold text-blue-500">ğŸ“ [[ item.demoLocation ]]</p>
          </div>
        </div>

        <div v-if="item.status.includes('æ„é¡˜')" class="bg-gray-50 border border-gray-100 rounded-2xl p-3 mb-4">
          <p class="text-[9px] font-black text-gray-400 mb-1 tracking-widest">ğŸ“ è¿½è¹¤å‚™è¨»</p>
          <p class="text-xs font-bold text-gray-600 line-clamp-2 italic">"[[ item.note || 'å°šç„¡å‚™è¨»' ]]"</p>
        </div>

        <div class="grid grid-cols-2 gap-2 mt-auto">
          <button class="bg-gray-100 text-gray-500 font-black py-3 rounded-xl text-[11px] active:bg-gray-200 shadow-sm">ğŸ’¬ LINE è¯ç¹«</button>
          
          <button v-if="item.status === 'å·²æ‹‰ç¾¤'" class="bg-amber-500 text-white font-black py-3 rounded-xl text-[11px] shadow-md shadow-amber-100 active:scale-95 transition">ğŸ“… ç´„å±•æ™‚é–“</button>
          <button v-if="item.status === 'å·²ç´„å±•'" class="bg-emerald-500 text-white font-black py-3 rounded-xl text-[11px] shadow-md shadow-emerald-100 active:scale-95 transition">âœ… å±•ç¤ºå®Œå›å ±</button>
          <button v-if="item.status.includes('æ„é¡˜')" class="bg-purple-600 text-white font-black py-3 rounded-xl text-[11px] shadow-md shadow-purple-100 active:scale-95 transition">âœï¸ æ›´æ–°é€²åº¦</button>
          <button v-if="item.status === 'æ‹’çµ•'" class="bg-gray-400 text-white font-black py-3 rounded-xl text-[11px] shadow-md shadow-gray-100">ğŸ’€ çµæ¡ˆ</button>
        </div>
      </div>
    </transition-group>
  </div>

  <script>
    const { createApp } = Vue;
    createApp({
      delimiters: ['[[', ']]'],
      data() {
        return {
          currentRep: 'All', // é è¨­é€²å…¥å…¨é«”æ¨¡å¼
          currentTab: 'å·²æ‹‰ç¾¤',
          tabs: [
            { id: 'å·²æ‹‰ç¾¤', icon: 'ğŸ†•', label: 'å¾…ç´„å±•', activeClass: 'bg-amber-500 text-white', ringClass: 'ring-amber-200' },
            { id: 'å·²ç´„å±•', icon: 'ğŸ—“ï¸', label: 'å¾…å±•ç¤º', activeClass: 'bg-blue-600 text-white', ringClass: 'ring-blue-200' },
            { id: 'æ„é¡˜é«˜', icon: 'ğŸ”¥', label: 'æ„é¡˜é«˜', activeClass: 'bg-red-600 text-white', ringClass: 'ring-red-200' },
            { id: 'æ„é¡˜ä¸­', icon: 'ğŸ¤”', label: 'æ„é¡˜ä¸­', activeClass: 'bg-orange-500 text-white', ringClass: 'ring-orange-200' },
            { id: 'æ„é¡˜ä½', icon: 'ğŸ§Š', label: 'æ„é¡˜ä½', activeClass: 'bg-teal-600 text-white', ringClass: 'ring-teal-200' },
            { id: 'æ‹’çµ•', icon: 'ğŸš«', label: 'æ‹’çµ•', activeClass: 'bg-gray-800 text-white', ringClass: 'ring-gray-200' }
          ],
          // æ¸¬è©¦å‡è³‡æ–™
          salesData: [
            { id: 1, owner: 'Kelvin', status: 'å·²æ‹‰ç¾¤', area: 'å°ä¸­', storeName: 'ç¾ç·¹åœ‹éš›', bossName: 'è”¡è€é—†', phone: '0912-***-***', note: '' },
            { id: 2, owner: 'David', status: 'å·²ç´„å±•', area: 'å°åŒ—', storeName: 'æ˜Ÿè¾°é«®å»Š', bossName: 'é™³å°å§', phone: '0987-***-***', demoTime: '02/24 14:00', demoLocation: 'Google Meet', note: '' },
            { id: 3, owner: 'Kelvin', status: 'æ„é¡˜é«˜', area: 'é«˜é›„', storeName: 'è‰¾èŠ®çµ²ç¾å­¸', bossName: 'æ—ç¶“ç†', phone: '0922-***-***', note: 'è€é—†è¦ºå¾—ç³»çµ±é ç´„åŠŸèƒ½å¾ˆå¼·ï¼Œé è¨ˆé€™é€±äº”ç°½ç´„ã€‚' },
            { id: 4, owner: 'David', status: 'æ„é¡˜ä¸­', area: 'å°å—', storeName: 'é‡‘å‰ªåˆ€', bossName: 'é»ƒè€é—†', phone: '0933-***-***', note: 'é‚„åœ¨æ¯”åƒ¹ä¸­ï¼Œéœ€è¦æä¾›æ›´å¤šæ–¹æ¡ˆã€‚' },
            { id: 5, owner: 'Kelvin', status: 'å·²ç´„å±•', area: 'å½°åŒ–', storeName: 'æ„›æ´›é›…', bossName: 'å¼µè€é—†', phone: '0955-***-***', demoTime: '02/26 10:30', demoLocation: 'å½°åŒ–ç¸£å“¡æ—å¸‚...', note: '' }
          ]
        }
      },
      computed: {
        filteredData() {
          let data = this.salesData;
          // ç¬¬ä¸€å±¤éæ¿¾ï¼šæ¥­å‹™å“¡
          if (this.currentRep !== 'All') {
            data = data.filter(i => i.owner === this.currentRep);
          }
          // ç¬¬äºŒå±¤éæ¿¾ï¼šéŠ·å”®ç‹€æ…‹
          return data.filter(i => i.status === this.currentTab);
        }
      },
      mounted() {
        // è¨˜æ†¶åŠŸèƒ½ï¼šå˜—è©¦è®€å–ä¸Šæ¬¡é¸æ“‡çš„æ¥­å‹™æ¨¡å¼
        const lastRep = localStorage.getItem('lastRep');
        if (lastRep) this.currentRep = lastRep;
      },
      methods: {
        setRep(name) {
          this.currentRep = name;
          localStorage.setItem('lastRep', name); // å„²å­˜é¸æ“‡
        },
        getTabCount(status) {
          let data = this.salesData;
          if (this.currentRep !== 'All') data = data.filter(i => i.owner === this.currentRep);
          return data.filter(i => i.status === status).length;
        },
        getStat(status) {
          let data = this.salesData;
          if (this.currentRep !== 'All') data = data.filter(i => i.owner === this.currentRep);
          return data.filter(i => i.status === status).length;
        },
        getCategoryColor(status) {
          const colors = { 'å·²æ‹‰ç¾¤': '#f59e0b', 'å·²ç´„å±•': '#2563eb', 'æ„é¡˜é«˜': '#dc2626', 'æ„é¡˜ä¸­': '#f97316', 'æ„é¡˜ä½': '#0d9488', 'æ‹’çµ•': '#1f2937' };
          return colors[status] || '#ccc';
        },
        getStatusBadge(status) {
          const badges = { 'å·²æ‹‰ç¾¤': 'border-amber-200 text-amber-600', 'å·²ç´„å±•': 'border-blue-200 text-blue-600', 'æ„é¡˜é«˜': 'border-red-200 text-red-600', 'æ„é¡˜ä¸­': 'border-orange-200 text-orange-600', 'æ„é¡˜ä½': 'border-teal-200 text-teal-600', 'æ‹’çµ•': 'border-gray-200 text-gray-600' };
          return badges[status] || '';
        }
      }
    }).mount('#app');
  </script>
</body>
</html>
