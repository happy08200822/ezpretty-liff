<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ğŸ¯ ezPretty æ¥­å‹™æˆ°æƒ…å®¤</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    [v-cloak] { display: none !important; }
    body { font-family: 'PingFang TC', sans-serif; background-color: #f1f5f9; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .card-shadow { box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.05); }
  </style>
</head>
<body class="pb-10">
  <div id="app" v-cloak class="w-full max-w-4xl mx-auto px-4 pt-6">

    <div class="flex bg-white p-1 rounded-2xl shadow-sm border border-slate-200 mb-6">
      <button v-for="rep in ['All', 'Kelvin', 'David']" :key="rep" @click="currentRep = rep"
        :class="['flex-1 py-3 rounded-xl text-xs font-black transition-all', currentRep === rep ? 'bg-slate-800 text-white' : 'text-slate-400']">
        [[ rep === 'All' ? 'ğŸŒ å…¨é«”æ•¸æ“š' : rep ]]
      </button>
    </div>

    <div class="grid grid-cols-2 gap-4 mb-6">
      <div class="bg-white p-5 rounded-[2rem] card-shadow border border-slate-100">
        <p class="text-[10px] font-black text-slate-400 uppercase mb-3 tracking-widest text-center">é–‹ç™¼è½‰æ›ç‡ (ç´„å±•/ç¸½é‡)</p>
        <div class="flex items-center justify-center">
           <span class="text-3xl font-black text-slate-800">[[ getConversionRate() ]]%</span>
        </div>
        <div class="w-full bg-slate-100 h-1.5 rounded-full mt-3 overflow-hidden">
          <div class="bg-indigo-500 h-full" :style="{ width: getConversionRate() + '%' }"></div>
        </div>
      </div>
      <div class="bg-white p-5 rounded-[2rem] card-shadow border border-slate-100">
        <p class="text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest text-center">ä¾†æºä½”æ¯” (è‡ªé–‹ç™¼/å…¬å¸)</p>
        <div class="flex justify-between text-[11px] font-black mb-1 px-1">
          <span class="text-emerald-500">ğŸš€ [[ getSourceCount('è‡ªé–‹ç™¼') ]]</span>
          <span class="text-blue-500">ğŸ¢ [[ getSourceCount('å…¬å¸ä»¶') ]]</span>
        </div>
        <div class="w-full flex h-2 rounded-full overflow-hidden">
          <div class="bg-emerald-400" :style="{ width: getSourcePercent('è‡ªé–‹ç™¼') + '%' }"></div>
          <div class="bg-blue-400" :style="{ width: getSourcePercent('å…¬å¸ä»¶') + '%' }"></div>
        </div>
      </div>
    </div>

    <div class="bg-white p-4 rounded-3xl border border-slate-100 card-shadow mb-6">
      <div class="flex gap-2 mb-3 overflow-x-auto no-scrollbar">
        <button @click="filterSource = 'All'" :class="['px-4 py-2 rounded-xl text-[11px] font-black flex-none', filterSource === 'All' ? 'bg-slate-800 text-white' : 'bg-slate-50 text-slate-500']">å…¨éƒ¨ä¾†æº</button>
        <button @click="filterSource = 'å…¬å¸ä»¶'" :class="['px-4 py-2 rounded-xl text-[11px] font-black flex-none', filterSource === 'å…¬å¸ä»¶' ? 'bg-blue-600 text-white' : 'bg-blue-50 text-blue-500']">ğŸ¢ å…¬å¸åˆ†é…</button>
        <button @click="filterSource = 'è‡ªé–‹ç™¼'" :class="['px-4 py-2 rounded-xl text-[11px] font-black flex-none', filterSource === 'è‡ªé–‹ç™¼' ? 'bg-emerald-600 text-white' : 'bg-emerald-50 text-emerald-500']">ğŸš€ è‡ªé–‹ç™¼</button>
      </div>
      <div class="flex gap-2">
        <input v-model="searchQuery" type="text" placeholder="æœå°‹åº—åã€åœ°å€..." class="flex-1 bg-slate-50 border-none ring-1 ring-slate-200 rounded-xl py-2 px-4 text-xs font-bold focus:ring-slate-800">
        <select v-model="currentTab" class="bg-slate-50 border-none ring-1 ring-slate-200 rounded-xl px-2 text-xs font-black text-slate-600">
          <option v-for="t in tabs" :key="t.id" :value="t.id">[[ t.label ]]</option>
        </select>
      </div>
    </div>

    <div class="space-y-4">
      <div v-for="item in processedData" :key="item.id" class="bg-white rounded-[2rem] p-6 border border-slate-100 card-shadow relative overflow-hidden transition-all">
        <div class="absolute top-0 left-0">
          <span :class="['text-[9px] font-black px-3 py-1 rounded-br-2xl text-white uppercase', item.source === 'å…¬å¸ä»¶' ? 'bg-blue-500' : 'bg-emerald-500']">[[ item.source ]]</span>
        </div>

        <div class="flex justify-between items-start mt-2">
          <div>
            <p class="text-[10px] font-black text-slate-400 mb-1">[[ item.owner ]] è² è²¬</p>
            <h2 class="text-xl font-black text-slate-800">[[ item.area ]] [[ item.storeName ]]</h2>
          </div>
          <span :class="['text-[10px] font-black px-3 py-1 rounded-lg border', getStatusBadge(item.status)]">[[ item.status ]]</span>
        </div>

        <div class="flex gap-4 mt-3 text-xs font-bold text-slate-500">
          <span>ğŸ‘¤ [[ item.bossName ]]</span>
          <a :href="'tel:' + item.phone" class="text-indigo-600">ğŸ“ [[ item.phone ]]</a>
        </div>

        <div class="mt-6 flex gap-2">
          <button class="flex-1 bg-slate-50 text-slate-600 font-black py-3 rounded-2xl text-xs active:bg-slate-100 transition">ğŸ’¬ LINE è¯ç¹«</button>
          <button class="flex-1 bg-slate-800 text-white font-black py-3 rounded-2xl text-xs shadow-lg shadow-slate-200 active:scale-95 transition">ğŸ“ æ›´æ–°é€²åº¦</button>
        </div>
      </div>
    </div>

    <div v-if="processedData.length === 0" class="text-center py-20 text-slate-300 font-black text-sm tracking-widest">
      NO RECORDS FOUND
    </div>

  </div>

  <script>
    const { createApp } = Vue;
    createApp({
      delimiters: ['[[', ']]'],
      data() {
        return {
          currentRep: 'All',
          currentTab: 'å·²æ‹‰ç¾¤',
          filterSource: 'All',
          searchQuery: '',
          tabs: [
            { id: 'å·²æ‹‰ç¾¤', label: 'å¾…ç´„å±•' },
            { id: 'å·²ç´„å±•', label: 'å¾…å±•ç¤º' },
            { id: 'æ„é¡˜é«˜', label: 'æ„é¡˜é«˜' },
            { id: 'æ„é¡˜ä¸­', label: 'æ„é¡˜ä¸­' },
            { id: 'æ„é¡˜ä½', label: 'æ„é¡˜ä½' },
            { id: 'æ‹’çµ•', label: 'æ‹’çµ•' }
          ],
          salesData: [
            { id: 1, owner: 'Kelvin', status: 'å·²æ‹‰ç¾¤', source: 'å…¬å¸ä»¶', area: 'å°ä¸­', storeName: 'ç¾ç·¹åœ‹éš›', bossName: 'è”¡è€é—†', phone: '0912-345-678' },
            { id: 2, owner: 'David', status: 'å·²ç´„å±•', source: 'è‡ªé–‹ç™¼', area: 'å°åŒ—', storeName: 'æ˜Ÿè¾°é«®å»Š', bossName: 'é™³å°å§', phone: '0987-654-321' },
            { id: 3, owner: 'Kelvin', status: 'æ„é¡˜é«˜', source: 'è‡ªé–‹ç™¼', area: 'é«˜é›„', storeName: 'è‰¾èŠ®çµ²ç¾å­¸', bossName: 'æ—ç¶“ç†', phone: '0922-333-444' }
          ]
        }
      },
      computed: {
        processedData() {
          let d = this.salesData;
          if (this.currentRep !== 'All') d = d.filter(i => i.owner === this.currentRep);
          if (this.currentTab !== 'All') d = d.filter(i => i.status === this.currentTab);
          if (this.filterSource !== 'All') d = d.filter(i => i.source === this.filterSource);
          if (this.searchQuery) {
            const s = this.searchQuery.toLowerCase();
            d = d.filter(i => i.storeName.includes(s) || i.area.includes(s));
          }
          return d;
        }
      },
      methods: {
        getSourceCount(source) {
          let d = this.salesData;
          if (this.currentRep !== 'All') d = d.filter(i => i.owner === this.currentRep);
          return d.filter(i => i.source === source).length;
        },
        getSourcePercent(source) {
          let d = this.salesData;
          if (this.currentRep !== 'All') d = d.filter(i => i.owner === this.currentRep);
          if (d.length === 0) return 0;
          return (d.filter(i => i.source === source).length / d.length) * 100;
        },
        getConversionRate() {
          let d = this.salesData;
          if (this.currentRep !== 'All') d = d.filter(i => i.owner === this.currentRep);
          if (d.length === 0) return 0;
          const converted = d.filter(i => i.status !== 'å·²æ‹‰ç¾¤' && i.status !== 'æ‹’çµ•').length;
          return Math.round((converted / d.length) * 100);
        },
        getStatusBadge(status) {
          const b = { 'å·²æ‹‰ç¾¤': 'border-amber-200 text-amber-600', 'å·²ç´„å±•': 'border-blue-200 text-blue-600', 'æ„é¡˜é«˜': 'border-red-200 text-red-600' };
          return b[status] || 'border-slate-200 text-slate-500';
        }
      }
    }).mount('#app');
  </script>
</body>
</html>
