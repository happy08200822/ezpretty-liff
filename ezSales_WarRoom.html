<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ğŸ¯ ezPretty æ¥­å‹™æˆ°æƒ…å®¤ Pro</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    [v-cloak] { display: none !important; }
    body { font-family: 'PingFang TC', sans-serif; background-color: #f1f5f9; -webkit-tap-highlight-color: transparent; }
    .card-shadow { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .expand-enter-active, .expand-leave-active { transition: all 0.2s ease-out; max-height: 400px; overflow: hidden; }
    .expand-enter-from, .expand-leave-to { max-height: 0; opacity: 0; }
    
    /* æ¨™ç±¤é¸ä¸­æ¨£å¼ */
    .chip-active { background-color: #1e293b !important; color: white !important; border-color: transparent !important; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
    
    /* éš±è—åŸç”Ÿ input month çš„é è¨­æ¨£å¼ä»¥ç¬¦åˆ UI */
    input[type="month"]::-webkit-calendar-picker-indicator { cursor: pointer; opacity: 0.6; }
  </style>
</head>
<body class="pb-10">
  <div id="app" v-cloak class="w-full max-w-4xl mx-auto px-3 pt-4">

    <div class="flex bg-gray-200 rounded-xl p-1 mb-3">
      <button v-for="rep in ['All', 'Kelvin', 'David']" :key="rep" @click="setRep(rep)"
        :class="['flex-1 py-2 rounded-lg text-xs font-black transition-all', currentRep === rep ? 'bg-white text-slate-800 shadow-sm' : 'text-slate-500']">
        [[ rep === 'All' ? 'ğŸŒ å…¨é«”' : rep ]]
      </button>
    </div>

    <div class="bg-white px-4 py-3 rounded-2xl card-shadow border border-slate-100 mb-3">
      <div class="flex justify-between items-center mb-1.5">
        <span class="text-[10px] font-black text-slate-400">$[[ formatNumber(stats.sales) ]]</span>
        <span class="text-[10px] font-black text-rose-500">ç›®æ¨™ $[[ formatNumber(targetAmount) ]]</span>
      </div>
      <div class="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
        <div class="bg-indigo-600 h-full transition-all duration-1000" :style="{ width: (stats.sales / targetAmount * 100) + '%' }"></div>
      </div>
    </div>

    <div class="bg-white rounded-2xl card-shadow border border-slate-100 mb-4 overflow-hidden">
      <button @click="showStats = !showStats" class="w-full px-4 py-2 flex justify-between items-center bg-slate-50/50">
        <span class="text-[9px] font-black text-slate-500 tracking-widest uppercase">æˆ°å ±æ•¸æ“šåˆ†æ</span>
        <span class="text-[10px] font-bold text-slate-400">[[ showStats ? 'â–² é»æ“Šæ”¶åˆ' : 'â–¼ é»æ“Šå±•é–‹' ]]</span>
      </button>
      <transition name="expand">
        <div v-if="showStats" class="p-4 space-y-4 border-t border-slate-100">
          <div class="grid grid-cols-2 gap-3 text-center">
            <div class="bg-blue-50 p-2 rounded-xl border border-blue-100 text-blue-700">
              <p class="text-[8px] font-black opacity-70">ğŸ¢ å…¬å¸ä»¶/å±•ç¤º</p>
              <p class="text-base font-black">[[ stats.corp.assign ]] / [[ stats.corp.demo ]]</p>
            </div>
            <div class="bg-emerald-50 p-2 rounded-xl border border-emerald-100 text-emerald-700">
              <p class="text-[8px] font-black opacity-70">ğŸš€ è‡ªé–‹ç™¼/å±•ç¤º</p>
              <p class="text-base font-black">[[ stats.self.assign ]] / [[ stats.self.demo ]]</p>
            </div>
          </div>
          <div>
            <div class="flex justify-between mb-1">
              <span v-for="s in intentStats" :key="s.label" :class="['text-[8px] font-black', s.color]">[[ s.label ]]:[[ s.count ]]</span>
            </div>
            <div class="w-full flex h-1 rounded-full overflow-hidden bg-slate-100">
              <div v-for="s in intentStats" :key="s.label" :class="[s.bgColor]" :style="{ width: (s.count / (stats.total || 1) * 100) + '%' }"></div>
            </div>
          </div>
        </div>
      </transition>
    </div>

    <div class="space-y-3 mb-6">
      <div class="relative">
        <input v-model="searchQuery" type="text" placeholder="ğŸ” æœå°‹åº—åæˆ–å€åŸŸ..." 
          class="w-full bg-white border-none ring-1 ring-slate-200 rounded-xl py-3 px-4 text-xs font-bold focus:ring-2 focus:ring-slate-800 outline-none shadow-sm">
      </div>

      <div class="flex gap-2 overflow-x-auto no-scrollbar pb-1 items-center">
        <button v-for="d in dateFilters" :key="d.id" @click="timeRange = d.id"
          :class="['flex-none px-4 py-1.5 rounded-full text-[10px] font-black border transition-all', timeRange === d.id ? 'chip-active' : 'bg-white text-slate-400 border-slate-200']">
          [[ d.label ]]
        </button>
        <div class="relative flex-none">
          <input type="month" v-model="customMonth" @change="timeRange = 'custom'"
            class="bg-white rounded-full px-3 py-1.5 text-[10px] font-black focus:outline-none transition-all border"
            :class="timeRange === 'custom' ? 'chip-active' : 'text-slate-400 border-slate-200'">
        </div>
      </div>

      <div class="flex gap-2 overflow-x-auto no-scrollbar pb-1">
        <button v-for="t in tabs" :key="t.id" @click="currentTab = t.id"
          :class="['flex-none px-4 py-1.5 rounded-full text-[10px] font-black border transition-all', currentTab === t.id ? 'chip-active' : 'bg-white text-slate-400 border-slate-200']">
          [[ t.label ]]
        </button>
      </div>
    </div>

    <div class="space-y-4">
      <div v-for="item in processedData" :key="item.id" class="bg-white rounded-[2rem] p-5 card-shadow border border-slate-100 relative">
        
        <div class="absolute top-5 right-6 text-right">
          <p class="text-[10px] font-black text-indigo-500 mb-0.5">ğŸ‘¤ [[ item.owner ]]</p>
          <p class="text-[9px] font-black text-slate-400 tracking-tighter uppercase">ğŸ“… [[ item.assignDate ]]</p>
        </div>

        <div class="mb-2">
          <div class="flex items-center gap-1.5 mb-1.5">
            <span :class="['text-[8px] font-black px-1.5 py-0.5 rounded text-white', item.source === 'å…¬å¸ä»¶' ? 'bg-blue-500' : 'bg-emerald-500']">[[ item.source ]]</span>
            <span class="text-[9px] font-black text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded uppercase">[[ item.industry ]]</span>
          </div>
          <h2 class="text-lg font-black text-slate-800 leading-tight pr-20">[[ item.area ]] [[ item.storeName ]]</h2>
        </div>

        <div class="mb-4 space-y-1.5">
          <div class="bg-blue-50/50 p-2.5 rounded-xl border-l-4 border-blue-400">
            <p class="text-[8px] font-black text-blue-400 uppercase mb-0.5 tracking-wider">ğŸ’¡ å»£å‘Šéœ€æ±‚ (J æ¬„)</p>
            <p class="text-[11px] font-bold text-slate-600 line-clamp-2">[[ item.adsReq || 'ç„¡å¡«å¯«éœ€æ±‚' ]]</p>
          </div>
          <div class="bg-amber-50/50 p-2.5 rounded-xl border-l-4 border-amber-400">
            <p class="text-[8px] font-black text-amber-500 uppercase mb-0.5 tracking-wider">ğŸš© ä¸»ç®¡å‚™è¨» (T æ¬„)</p>
            <p class="text-[11px] font-bold text-slate-600 line-clamp-2">[[ item.managerNote || 'æš«ç„¡å‚™è¨»' ]]</p>
          </div>
        </div>

        <div class="space-y-1 text-[11px] font-bold text-slate-500 bg-slate-50 p-3 rounded-2xl mb-4 border border-slate-100">
          <div class="flex justify-between py-0.5 border-b border-slate-200/50 pb-1">
            <span class="text-slate-400">ğŸ¬ å±•ç¤ºæ—¥æœŸ</span>
            <span class="text-slate-700">[[ item.demoDate ]] ([[ item.demoMethod ]])</span>
          </div>
          <div class="flex justify-between py-0.5 border-b border-slate-200/50 pb-1">
            <span class="text-slate-400">ğŸ† å±•ç¤ºçµæœ</span>
            <span :class="item.demoResult === 'æ‹’çµ•' ? 'text-rose-500' : 'text-slate-700'">[[ item.demoResult ]]</span>
          </div>
          <div class="flex justify-between py-0.5 border-b border-slate-200/50 pb-1">
            <span class="text-slate-400">âŒ› å¡«è¡¨æ™‚é–“</span>
            <span class="text-slate-400 font-medium text-[10px]">[[ item.trackTime ]]</span>
          </div>
          <div class="flex justify-between py-0.5">
            <span class="text-slate-400">ğŸ’° æˆäº¤/é‡‘é¡</span>
            <span class="text-emerald-600 font-black">[[ item.dealDate ? 'å·²æˆäº¤' : 'å°šæœªæˆäº¤' ]] / $[[ formatNumber(item.salesAmount) ]]</span>
          </div>
        </div>

        <div class="grid grid-cols-3 gap-2">
          <button class="py-2.5 bg-slate-100 rounded-xl text-[10px] font-black text-slate-600 active:bg-slate-200 transition">LINE ID</button>
          <button class="py-2.5 bg-slate-100 rounded-xl text-[10px] font-black text-slate-600 active:bg-slate-200 transition">é›»è©±</button>
          <button class="py-2.5 bg-slate-100 rounded-xl text-[10px] font-black text-slate-600 active:bg-slate-200 transition">ç¾¤çµ„é€£çµ</button>
          <button class="py-2.5 bg-amber-500 rounded-xl text-[10px] font-black text-white active:scale-95 shadow-sm shadow-amber-200 transition">ç´„å±•å›å ±</button>
          <button class="py-2.5 bg-blue-600 rounded-xl text-[10px] font-black text-white active:scale-95 shadow-sm shadow-blue-200 transition">å±•ç¤ºå›å ±</button>
          <button class="py-2.5 bg-emerald-600 rounded-xl text-[10px] font-black text-white active:scale-95 shadow-sm shadow-emerald-200 transition">è¿½è¹¤å›å ±</button>
        </div>
      </div>
    </div>
    
    <div v-if="processedData.length === 0" class="text-center py-20">
      <p class="text-slate-300 font-black tracking-widest uppercase text-sm">ç„¡ç¬¦åˆæ¢ä»¶çš„åå–®</p>
    </div>

  </div>

  <script>
    const { createApp } = Vue;
    createApp({
      delimiters: ['[[', ']]'],
      data() {
        return {
          currentRep: 'Kelvin', 
          showStats: false, 
          currentTab: 'å·²æ‹‰ç¾¤', 
          timeRange: 'thisMonth', 
          customMonth: '', // å„²å­˜ HTML5 æœˆä»½é¸æ“‡å™¨çš„å€¼ (YYYY-MM)
          searchQuery: '',
          dateFilters: [
            { id: 'today', label: 'ä»Šæ—¥' }, 
            { id: 'thisWeek', label: 'æœ¬é€±' }, 
            { id: 'thisMonth', label: 'æœ¬æœˆ' }, 
            { id: 'lastMonth', label: 'ä¸Šæœˆ' },
            { id: 'all', label: 'å…¨éƒ¨' }
          ],
          tabs: [
            { id: 'å·²æ‹‰ç¾¤', label: 'å·²æ‹‰ç¾¤' }, { id: 'ç´„å±•ä¸­', label: 'ç´„å±•ä¸­' }, { id: 'æ„é¡˜é«˜', label: 'æ„é¡˜é«˜' }, 
            { id: 'æ„é¡˜ä¸­', label: 'æ„é¡˜ä¸­' }, { id: 'æ„é¡˜ä½', label: 'æ„é¡˜ä½' }, { id: 'æˆäº¤', label: 'æˆäº¤' }, { id: 'æ‹’çµ•', label: 'æ‹’çµ•' }
          ],
          // æš«æ™‚çš„éœæ…‹æ¨¡æ“¬æ•¸æ“š (ä¸‹ä¸€æ­¥ç”± GAS æ›¿æ›)
          stats: { sales: 78500, total: 20, corp: { assign: 10, demo: 4 }, self: { assign: 10, demo: 8 } },
          intentStats: [
            { label: 'æˆäº¤', count: 3, color: 'text-amber-500', bgColor: 'bg-amber-500' },
            { label: 'é«˜', count: 5, color: 'text-rose-500', bgColor: 'bg-rose-500' },
            { label: 'ä¸­', count: 7, color: 'text-orange-400', bgColor: 'bg-orange-400' },
            { label: 'ä½', count: 3, color: 'text-blue-400', bgColor: 'bg-blue-400' },
            { label: 'æ‹’', count: 2, color: 'text-slate-300', bgColor: 'bg-slate-300' }
          ],
          salesData: [
            { 
              id: 1, owner: 'Kelvin', status: 'å·²æ‹‰ç¾¤', source: 'å…¬å¸ä»¶', industry: 'ç¾é«®æ¥­', area: 'å°ä¸­', storeName: 'ç¾ç·¹åœ‹éš›', 
              adsReq: 'å¸Œæœ›èƒ½å„ªåŒ–ç·šä¸Šé ç´„è½‰å–®ç‡ã€‚', managerNote: 'è€é—†éå¸¸åœ¨æ„åƒ¹æ ¼ï¼Œå¤šå¼·èª¿ç³»çµ±èƒ½çœä¸‹çš„äººäº‹æˆæœ¬ã€‚',
              assignDate: '2026/02/20', demoDate: '02/25', demoMethod: 'ç·šä¸Š', demoResult: 'å¾…å®š', trackTime: '2026/02/22 10:00', dealDate: '', salesAmount: 0 
            },
            { 
              id: 2, owner: 'David', status: 'æ„é¡˜é«˜', source: 'è‡ªé–‹ç™¼', industry: 'ç¾å®¹æ¥­', area: 'å°åŒ—', storeName: 'æ˜Ÿè¾°æ²™é¾', 
              adsReq: 'ç„¡å¡«å¯«éœ€æ±‚', managerNote: 'æœ¬é€±äº”å‰å‹™å¿…å†æ‰“ä¸€é€šé›»è©±ç¢ºèªè€é—†æ„é¡˜ã€‚',
              assignDate: '2026/02/18', demoDate: '02/20', demoMethod: 'ç¾å ´', demoResult: 'é †åˆ©', trackTime: '2026/02/21 15:30', dealDate: '', salesAmount: 0 
            }
          ]
        }
      },
      computed: {
        targetAmount() { return this.currentRep === 'All' ? 240000 : 120000; },
        processedData() {
          let d = this.salesData;
          // 1. æ¥­å‹™éæ¿¾
          if (this.currentRep !== 'All') d = d.filter(i => i.owner === this.currentRep);
          // 2. ç‹€æ…‹éæ¿¾
          if (this.currentTab) d = d.filter(i => i.status === this.currentTab);
          // 3. æœå°‹éæ¿¾
          if (this.searchQuery) {
            const s = this.searchQuery.toLowerCase();
            d = d.filter(i => i.storeName.includes(s) || i.area.includes(s) || i.adsReq.includes(s) || i.managerNote.includes(s));
          }
          // 4. æ—¥æœŸéæ¿¾ (æ­¤è™•é ç•™çµ¦ GAS ä¸²æ¥å¾Œé€²è¡Œé‚è¼¯è™•ç†)
          return d;
        }
      },
      methods: {
        setRep(n) { this.currentRep = n; },
        formatNumber(v) { return v.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); }
      }
    }).mount('#app');
  </script>
</body>
</html>
