<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ” ezPretty é–‹ç™¼æˆ°æƒ…å®¤</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body { font-family: -apple-system, sans-serif; background: #f0f2f5; padding: 10px; margin: 0; }
    .header-sticky { position: sticky; top: 0; background: #f0f2f5; z-index: 100; padding-bottom: 10px; }
    .search-input { width: 100%; padding: 12px 20px; border-radius: 25px; border: none; box-sizing: border-box; font-size: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 10px; }
    
    /* ç¯©é¸æŒ‰éˆ•æ¨£å¼ */
    .filter-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .filter-btn { padding: 10px 5px; border-radius: 12px; border: none; font-weight: bold; color: white; text-align: center; font-size: 13px; position: relative; transition: 0.2s; }
    .btn-ice { background: #5D9CEC; } .btn-stall { background: #FFCE54; color: #656D78; }
    .btn-hot { background: #ED5565; } .btn-dead { background: #AAB2BD; }
    .filter-btn.active { box-shadow: 0 0 0 3px #434A54; transform: scale(0.98); }

    /* åº—å®¶å¡ç‰‡ */
    .store-card { background: white; border-radius: 16px; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.06); border-top: 6px solid #ccc; }
    .card-ice { border-top-color: #5D9CEC; } .card-stall { border-top-color: #FFCE54; }
    .card-hot { border-top-color: #ED5565; } .card-dead { border-top-color: #AAB2BD; }

    .store-name { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 8px; }
    .key-badge { font-size: 11px; background: #eee; color: #666; padding: 2px 6px; border-radius: 4px; font-weight: normal; }

    /* 10 å¤§è³‡è¨Šå€ (è¡¨æ ¼åŒ–) */
    .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; font-size: 13px; color: #555; background: #f9fbff; padding: 12px; border-radius: 10px; border: 1px solid #edf2f7; }
    .info-item b { color: #333; font-weight: 600; }
    .full-row { grid-column: span 2; border-top: 1px solid #eaedf3; padding-top: 6px; margin-top: 4px; }

    .status-tags { display: flex; gap: 6px; margin: 12px 0; flex-wrap: wrap; }
    .badge { font-size: 11px; padding: 4px 8px; border-radius: 6px; background: #f1f3f5; color: #495057; }

    /* å‹•ä½œæŒ‰éˆ• */
    .action-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 15px; }
    .btn-tool { display: flex; flex-direction: column; align-items: center; padding: 8px 0; border-radius: 10px; border: 1px solid #ddd; font-size: 10px; font-weight: bold; text-decoration: none; color: #444; background: #fff; }
    .btn-tool span { font-size: 18px; margin-bottom: 2px; }
    .btn-call { background: #eafaf1; border-color: #2ecc71; color: #27ae60; }
    .btn-line { background: #ebf9f0; border-color: #06C755; color: #06C755; }
  </style>
</head>
<body>

  <div class="header-sticky">
    <input type="text" class="search-input" id="searchInput" placeholder="ğŸ” æœåº—å®¶ã€è² è²¬äººã€é›»è©±æˆ–éœ€æ±‚..." oninput="render()">
    <div class="filter-grid">
      <div class="filter-btn btn-ice active" id="f-ice" onclick="setFilter('ice')">ğŸ§Š å†°å°<span>å…¨æ–°åå–®</span></div>
      <div class="filter-btn btn-stall" id="f-stall" onclick="setFilter('stall')">âš¡ åƒµå±€<span>å·²åŠ è³´/ä¸å›</span></div>
      <div class="filter-btn btn-hot" id="f-hot" onclick="setFilter('hot')">ğŸ”¥ ç†±åº¦<span>é›»è©±å·²é€š</span></div>
      <div class="filter-btn btn-dead" id="f-dead" onclick="setFilter('dead')">âš ï¸ ç€•æ­»<span>æ‹’çµ•/å¤±è¯</span></div>
    </div>
  </div>

  <div id="storeList"></div>

<script>
  let allData = []; // ç”±å¾Œç«¯è®€å–
  let currentFilter = 'ice';

  function render() {
    const list = document.getElementById('storeList');
    const search = document.getElementById('searchInput').value.toLowerCase();
    
    const filtered = allData.filter(i => {
      const matchSearch = i.name.includes(search) || i.boss.includes(search) || i.phone.includes(search) || i.req.includes(search);
      return matchSearch && i.type === currentFilter;
    });

    list.innerHTML = filtered.map(item => `
      <div class="store-card card-${item.type}">
        <div class="store-name">
          [${item.area}] ${item.name} <span class="key-badge">#${item.key}</span>
        </div>
        
        <div class="info-grid">
          <div class="info-item"><b>ä¾†æº:</b> ${item.source}</div>
          <div class="info-item"><b>å¡«å–®æ—¥:</b> ${item.date}</div>
          <div class="info-item"><b>ç”¢æ¥­:</b> ${item.industry}</div>
          <div class="info-item"><b>è² è²¬äºº:</b> ${item.boss}</div>
          <div class="info-item"><b>Line ID:</b> ${item.lineId}</div>
          <div class="info-item"><b>é›»è©±:</b> ${item.phone}</div>
          <div class="info-item full-row"><b>Email:</b> ${item.email}</div>
          <div class="info-item full-row" style="color:#d35400;"><b>å»£å‘Šéœ€æ±‚:</b> ${item.req}</div>
        </div>

        <div class="status-tags">
          <span class="badge">LINE: ${item.lineStatus ? 'âœ…' : 'âŒ'}</span>
          <span class="badge">å·²è®€: ${item.readStatus ? 'âœ…' : 'âŒ'}</span>
          <span class="badge">é€šè©±: ${item.callCount}æ¬¡</span>
          <span class="badge">${item.emailSent ? 'âœ‰ï¸ å·²å¯„ä¿¡' : 'âœ‰ï¸ æœªå¯„ä¿¡'}</span>
        </div>

        <div class="action-grid">
          <a href="tel:${item.phone}" class="btn-tool btn-call"><span>ğŸ“</span>æ’¥é›»è©±</a>
          <a href="https://line.me/ti/p/~${item.lineId}" class="btn-tool btn-line"><span>ğŸ’¬</span>åŠ LINE</a>
          <div class="btn-tool" onclick="openUpdate('${item.key}')"><span>ğŸ“</span>æ›´æ–°é€²åº¦</div>
          <div class="btn-tool" style="background:#f0f7ff; color:#2980b9;" onclick="openDispatch('${item.key}')"><span>ğŸš€</span>åŸ·è¡Œæ´¾å–®</div>
        </div>
      </div>
    `).join('');
  }

  function setFilter(t) {
    currentFilter = t;
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('f-'+t).classList.add('active');
    render();
  }
</script>
</body>
</html>